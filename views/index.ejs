<style>
@import url(http://fonts.googleapis.com/css?family=Raleway:300);
body {
	margin: 0;
	font-family: Raleway;
	font-size: 25px;
}
#form {
	width:800px;
	margin:70px auto;
}
#form hr {
	border: none;
	border-bottom: 2px dashed #ddd;
}
#form .header {
	margin-bottom: 10px;
}
#form .button {
	float:left;
	background: #000;
	color: #fff;
	text-align: center;
	padding: 10px;
	width:200px;
	margin-right: 10px;
	border-radius: 100px;
	cursor: pointer;
}
#form .button:hover {
	background: #555;
}
#form .text_input {
	padding:5px; font-size:25px; font-family:Raleway; width:100%
}
</style>

<div style="text-align:center; font-size:50px; width:100%; height:50px; padding:25px 0; margin-top: 50px; background:#000; color:#fff">
	[TEST] PROGRESS PLEDGES
</div>

<div id="form">

	<form id="progress_pledge" action="/pledge" method="POST">

		<!-- HIDDEN INPUTS -->
		<input style="display:none" name="stripeToken"></input>

		<!-- BACKER INFORMATION -->

		<div class="header">
			Hi! What's your name? (If you want to be credited in the leaderboard)
		</div>
		<input type="text" name="backer_name" class="text_input" placeholder="Anonymous"></input>
		
		<br><br>

		<div class="header">
			What's your email? <i>(Please double check!)</i>
		</div>
		<!--You will only be sent notifications if/when a part of your pledge is claimed.-->
		<input type="email" name="backer_email" class="text_input" placeholder="your@email.com"></input>
		
		<br><br><hr><br>

		<!-- PLEDGE INFORMATION -->

		<div class="header">
			How would you like to split up your Progress Pledge?
		</div>
		<input type="radio" name="pledge_split" value="quarter" checked> 25% upfront, 25% for alpha, 25% for beta, 25% for full game
		<br>
		<input type="radio" name="pledge_split" value="half"> 50% upfront, 50% for full game
		<br>
		<input type="radio" name="pledge_split" value="all"> 100% upfront

		<br><br>

		<div class="header">
			How much would you like to pledge in total?
		</div>
		<input type="radio" name="pledge_total" value="10" checked> $10
		<br>
		<input type="radio" name="pledge_total" value="25"> $25
		<br>
		<input type="radio" name="pledge_total" value="50"> $50
		<br>
		<input type="radio" name="pledge_total" value="100"> $100

		<span style="display:none">
			<br>
			<input type="radio" name="pledge_total" value="custom">
			$<input type="text" name="pledge_total_custom" class="text_input" value="" style="width:200px"></input>
			($2 minimum, due to Stripe's minimum limit)
		</span>
		
		<br><br><hr><br>

		<!-- PAYMENT METHODS -->

		<div class="header">
			Alright alright alright, let's pledge this!
			<br>(note: can only do 100% upfront pledges with paypal & bitcoin)
		</div>

		<div style="overflow:hidden">
			<div class="button" id="credit_card">Credit Card</div>
			<div class="button" style="opacity:0.2">PayPal</div>
			<div class="button" style="opacity:0.2">Bitcoin</div>
		</div>
		<div style="font-size:15px">
			<br>
			use the test credit card:<br>
			card: 4242 4242 4242 4242<br>
			expires: 12/34<br>
			cvc: 123<br>
		</div>

	</form>
</div>


<script src="https://checkout.stripe.com/checkout.js"></script>
<script>

var handler = StripeCheckout.configure({
	key: "<%=STRIPE_PUBLIC_KEY%>",
	image: "http://placekitten.com/128/128",
	token: function(token, args) {
		var form = document.querySelector("#progress_pledge");
		document.querySelector("input[name=stripeToken]").value = token.id;
		form.submit();
	}
});

document.getElementById('credit_card').addEventListener('click', function(e) {

	var backer_email = document.getElementsByName("backer_email")[0].value;

	// Open Checkout with further options
	handler.open({
		name: 'Nothing To Hide',
		description: "you won't be charged right now",
		email: backer_email,
		panelLabel: "Pledge!",
		amount: 0
	});

});

</script>

